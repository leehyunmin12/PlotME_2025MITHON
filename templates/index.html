<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>일기 분석 결과 - Plot!Me</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #ffffff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .header-title {
            font-size: 18px;
            font-weight: bold;
            color: #000000;
        }

        .close-btn {
            width: 24px;
            height: 24px;
            border: none;
            background: none;
            font-size: 18px;
            color: #000000;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            background-color: #f5f5f5;
            border-radius: 4px;
        }

        .card-grade-section {
            background-color: #F3F0FF;
            border-radius: 16px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .grade-info {
            flex: 1;
        }

        .grade-title {
            font-size: 16px;
            font-weight: bold;
            color: #8B5CF6;
            margin-bottom: 8px;
        }

        .grade-description {
            font-size: 14px;
            color: #A78BFA;
            line-height: 1.4;
        }

        .grade-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #8B5CF6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-size: 24px;
            font-weight: bold;
        }

        .summary-section {
            background-color: #ffffff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .summary-title {
            font-size: 16px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 8px;
        }

        .summary-date {
            font-size: 14px;
            color: #000000;
            margin-bottom: 16px;
        }

        .summary-content {
            font-size: 14px;
            color: #333333;
            line-height: 1.6;
        }

        .growth-section {
            background-color: #F0FDF4;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .growth-title {
            font-size: 16px;
            font-weight: bold;
            color: #16A34A;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .growth-icon {
            font-size: 20px;
        }

        .growth-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .growth-item {
            background-color: #ffffff;
            border-left: 3px solid #22C55E;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            color: #333333;
            line-height: 1.5;
        }

        .emotion-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .emotion-title {
            font-size: 16px;
            font-weight: bold;
            color: #000000;
        }

        .emotion-cards {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding-bottom: 8px;
        }

        .emotion-cards::-webkit-scrollbar {
            display: none;
        }

        .emotion-card {
            min-width: 200px;
            height: 160px;
            border-radius: 16px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
        }

        .emotion-card:nth-child(1) {
            background-color: #FFFDD0;
        }

        .emotion-card:nth-child(2) {
            background-color: #F5E6D3;
        }

        .emotion-card:nth-child(3) {
            background-color: #E8F5E8;
        }

        .emotion-card:nth-child(4) {
            background-color: #F0E6FF;
        }

        .emotion-card:nth-child(5) {
            background-color: #FFE6F0;
        }

        .emotion-date {
            font-size: 12px;
            color: #666666;
        }

        .emotion-emoji {
            font-size: 32px;
            text-align: center;
            margin: 8px 0;
        }

        .emotion-quote {
            font-size: 14px;
            font-weight: bold;
            color: #000000;
            text-align: center;
            font-style: italic;
        }
        
        .exit-btn {
            text-decoration: none;
        }

        @media (max-width: 480px) {
            body {
                padding: 16px;
            }
            
            .container {
                max-width: 100%;
                gap: 16px;
            }
            
            .card-grade-section {
                padding: 16px;
            }
            
            .summary-section {
                padding: 16px;
            }

            .growth-section {
                padding: 16px;
            }
            
            .emotion-card {
                min-width: 180px;
                height: 140px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="header-title">일기 분석 결과</h1>
            <a href="card.html" class="exit-btn">X</a>
        </div>

        <div class="card-grade-section">
            <div class="grade-info">
                <div class="grade-title">오늘의 카드 등급</div>
                <div class="grade-description">앞으로 한 번의 카드를 더 모으면 다음 등급으로 올라가요!</div>
            </div>
            <div class="grade-circle">C</div>
        </div>



        <div class="growth-section">
            <div class="growth-title">
                <span class="growth-icon">📈</span>
                성장 카드 생성!
            </div>
            <div class="growth-items" id="growthItems">
                <!-- 동적으로 생성됨 -->
            </div>
        </div>

        <div class="emotion-section">
            <div class="emotion-title">오늘의 감정 카드</div>
            <div class="emotion-cards">
                <div class="emotion-card">
                    <div class="emotion-date">2025.10.27(월)</div>
                    <div class="emotion-emoji">😬</div>
                    <div class="emotion-quote">"완벽하진 않지만"</div>
                </div>
                <div class="emotion-card">
                    <div class="emotion-date">2025.10.26(일)</div>
                    <div class="emotion-emoji">😊</div>
                    <div class="emotion-quote">"오늘도 화이팅!"</div>
                </div>
                <div class="emotion-card">
                    <div class="emotion-date">2025.10.25(토)</div>
                    <div class="emotion-emoji">🤔</div>
                    <div class="emotion-quote">"생각이 많아지는 날"</div>
                </div>
                <div class="emotion-card">
                    <div class="emotion-date">2025.10.24(금)</div>
                    <div class="emotion-emoji">😌</div>
                    <div class="emotion-quote">"평온한 하루"</div>
                </div>
                <div class="emotion-card">
                    <div class="emotion-date">2025.10.23(목)</div>
                    <div class="emotion-emoji">😅</div>
                    <div class="emotion-quote">"또 실수했네"</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 일기 데이터 (실제로는 서버에서 받아올 데이터)
        const diaryData = {
            today: {
                date: "2025.10.25",
                content: "오늘은 아침부터 유난히 공기가 선선했다. 창문을 열자마자 차가운 바람이 살짝 얼굴을 스쳤고, 그 바람 속에 섞인 가을 냄새가 참 좋았다. 요즘은 해가 늦게 뜨고 금방 지는 탓에 하루가 짧게 느껴진다. 그런 계절이라 그런지 괜히 마음이 조용해지는 것 같다. 점심쯤엔 카페에 가서 혼자 책을 읽었다. 창가 자리에서 햇빛이 따뜻하게 비쳐서 기분이 좋았고, 커피 향이 잔잔하게 퍼지면서 마음이 한결 여유로워졌다. 책 속 문장 하나하나가 이상하게 더 마음에 와닿는 날이었다. 집에 돌아오는 길엔 단풍이 예쁘게 물든 나무들이 눈에 띄었다. 빨강, 주황, 노랑이 섞여서 마치 그림 같았다. 괜히 발걸음을 늦추고 한참을 바라봤다. 이런 순간들이 아마도 '행복'이라는 단어에 가장 가까운 게 아닐까 싶었다. 오늘 하루는 특별한 일은 없었지만, 조용히 나 자신을 돌아보고 마음을 쉬게 한 하루였다. 이런 평범한 날들이 오히려 오래 기억에 남을지도 모르겠다.",
                emotion: "평온함"
            },
            yesterday: {
                date: "2025.10.24",
                content: "오늘 새로운 프로젝트를 시작했다. 처음엔 어려워 보였지만 차근차근 해보려고 노력했다. 아직 부족한 부분이 많지만 계속 해봐야겠다.",
                emotion: "중립"
            }
        };

        // 성장 포인트 분석 함수
        function analyzeGrowth() {
            const today = diaryData.today.content;
            const yesterday = diaryData.yesterday.content;

            // 긍정적 감정 키워드
            const positiveKeywords = ["좋았다", "여유", "행복", "따뜻하", "평온", "기분이 좋"];
            const mindfulKeywords = ["돌아보", "마음을 쉬", "성찰", "바라봤", "여유"];
            const yesterdayStruggleKeywords = ["어려워", "부족"];

            let analysis = "";

            // 1. 감정 상태 개선 감지
            const hasPositiveEmotions = positiveKeywords.some(keyword => today.includes(keyword));
            const hadStruggle = yesterdayStruggleKeywords.some(keyword => yesterday.includes(keyword));

            if (hasPositiveEmotions && hadStruggle) {
                analysis += "어제는 새로운 프로젝트로 어려움을 느꼈지만, 오늘은 그런 불안감에서 벗어나 마음의 여유를 찾았어요. ";
            }

            // 2. 자기 돌봄과 마음챙김
            const hasMindfulness = mindfulKeywords.some(keyword => today.includes(keyword));
            if (hasMindfulness) {
                analysis += "바쁜 일상 속에서도 자신의 마음과 감정에 집중하고, 작은 순간들을 소중히 여기는 자기 돌봄이 늘었어요. ";
            }

            // 3. 감사와 긍정적 사고
            if (today.includes("행복") && today.includes("평범한")) {
                analysis += "특별한 일이 없어도 그 순간을 즐기고 감사할 줄 아는 마음이 생겼어요. ";
            }

            // 4. 미적 감수성 증가
            if (today.includes("단풍") && today.includes("그림") && today.includes("발걸음을 늦추")) {
                analysis += "주변의 아름다움을 더 세심하게 느끼고 그 순간을 음미하려는 태도가 성숙해졌어요. ";
            }

            if (analysis === "") {
                analysis = "매일 다른 경험을 하면서 천천히 성장하고 있어요. 오늘 같은 평온한 하루도 당신의 마음을 더 풍요롭게 만드는 자산이 될 거예요.";
            }

            return analysis;
        }

        // 성장 포인트 렌더링
        function renderGrowthPoints() {
            const growthAnalysis = analyzeGrowth();
            const growthContainer = document.getElementById('growthItems');
            
            growthContainer.innerHTML = `<div class="growth-item">${growthAnalysis}</div>`;
        }

        // 닫기 버튼
        function closeAnalysis() {
            if (confirm('일기 분석 결과를 닫으시겠습니까?')) {
                window.history.back();
            }
        }

        // 감정 카드 클릭 이벤트
        document.querySelectorAll('.emotion-card').forEach(card => {
            card.addEventListener('click', function() {
                const date = this.querySelector('.emotion-date').textContent;
                const quote = this.querySelector('.emotion-quote').textContent;
                alert(`${date}\n${quote}`);
            });
        });

        // ESC 키로 닫기
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeAnalysis();
            }
        });

        // 터치 스와이프 지원 (감정 카드)
        let startX = 0;
        let isScrolling = false;

        document.querySelector('.emotion-cards').addEventListener('touchstart', function(e) {
            startX = e.touches[0].clientX;
            isScrolling = true;
        });

        document.querySelector('.emotion-cards').addEventListener('touchmove', function(e) {
            if (!isScrolling) return;
            e.preventDefault();
        });

        document.querySelector('.emotion-cards').addEventListener('touchend', function(e) {
            if (!isScrolling) return;
            
            const endX = e.changedTouches[0].clientX;
            const diffX = startX - endX;
            
            if (Math.abs(diffX) > 50) {
                const container = this;
                const scrollAmount = 200;
                
                if (diffX > 0) {
                    container.scrollBy({
                        left: scrollAmount,
                        behavior: 'smooth'
                    });
                } else {
                    container.scrollBy({
                        left: -scrollAmount,
                        behavior: 'smooth'
                    });
                }
            }
            
            isScrolling = false;
        });

        // 페이지 로드 시 성장 포인트 렌더링
        document.addEventListener('DOMContentLoaded', renderGrowthPoints);
    </script>
</body>
</html>